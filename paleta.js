/* paleta.js - aplica colores a cajas y botones según código extraído */
document.addEventListener('DOMContentLoaded', () => {
  const colorMap = {
    "F016": "#d7e5ea",
    "F017": "#e6edf1",
    "F018": "#d7e5ea",
    "F021": "#e5e9e6",
    "F027": "#e5e9e6",
    "F029": "#f4f9f8",
    "F030": "#ebede2",
    "F031": "#e4ebe3",
    "F032": "#f6f8ea",
    "F033": "#e4ebe3",
    "F037": "#eff3e7",
    "F038": "#e1f0e8",
    "F039": "#edf5ef",
    "F043": "#f6f8f1",
    "F044": "#fafcfa",
    "F048": "#f6f8f1",
    "F050": "#eaece6",
    "F052": "#f0f6eb",
    "F058": "#eff2da",
    "F060": "#fefdf5",
    "F071": "#fcf8d9",
    "F072": "#f6f8de",
    "F077": "#f6f8de",
    "F079": "#f6f8de",
    "F081": "#f5f1d9",
    "F087": "#fdf5e8",
    "F089": "#fdf5e8",
    "F090": "#f4ded0",
    "F095": "#fdf2e4",
    "F096": "#fdf2e4",
    "F097": "#f7ede0",
    "F098": "#fdf7ea",
    "F099": "#fefcf8",
    "F100": "#f7e6de",
    "F101": "#f7dec5",
    "F109": "#f7e6de",
    "F113": "#f7dccc",
    "F115": "#f7dccc",
    "F120": "#fdf6ed",
    "F122": "#f6d6cf",
    "F129": "#fbe6da",
    "F130": "#fcefe3",
    "F134": "#f9dbd3",
    "F135": "#f9ddce",
    "F136": "#fbe1d7",
    "F137": "#f3d9c2",
    "F138": "#f7ded4",
    "F139": "#f7ded4",
    "F140": "#f7ded4",
    "F141": "#f7d9dd",
    "F143": "#f8e7ea",
    "F145": "#f7d9dd",
    "F148": "#eee2ea",
    "F149": "#f6edf1",
    "F151": "#fae8e8",
    "F155": "#f0e1da",
    "F157": "#fdfcf6",
    "F162": "#ede6e0",
    "F167": "#f2e7e6",
    "F168": "#fdfbf8",
    "G016": "#aad5eb",
    "G017": "#aad5eb",
    "G018": "#c2d3dc",
    "G021": "#c0d5eb",
    "G027": "#dce0df",
    "G029": "#e5f1f3",
    "G030": "#c3dfe9",
    "G031": "#bad9d8",
    "G032": "#f6f8ea",
    "G033": "#e0e7e0",
    "G037": "#bce0d9",
    "G038": "#a8d6cc",
    "G039": "#bce0d9",
    "G044": "#d5e5d8",
    "G048": "#ecf2ee",
    "G050": "#dde2d2",
    "G052": "#d4e6cd",
    "G058": "#e6edc3",
    "G060": "#f7f6e0",
    "G071": "#f7f3ad",
    "G072": "#f5f3bd",
    "G077": "#f5f7d4",
    "G079": "#f5f7d4",
    "G081": "#f8e3ac",
    "G087": "#fbeacf",
    "G089": "#fce3ca",
    "G090": "#f1dac3",
    "G095": "#f7d2b8",
    "G096": "#fadcc3",
    "G097": "#f5e2cb",
    "G098": "#fbf2d8",
    "G099": "#fcfae4",
    "G100": "#e6cead",
    "G101": "#e6d6bd",
    "G109": "#efcec5",
    "G113": "#e4c5af",
    "G115": "#c7a38e",
    "G120": "#f6dcd3",
    "G122": "#d9af9b",
    "G129": "#f9dbd3",
    "G130": "#f9daca",
    "G134": "#f3cfc3",
    "G135": "#f4cfc7",
    "G136": "#f4cfc7",
    "G137": "#e2baad",
    "G138": "#e8c4bc",
    "G139": "#f4c8bf",
    "G140": "#e8c4bc",
    "G141": "#e5bcc2",
    "G143": "#f7d9dd",
    "G145": "#e9c4ce",
    "G148": "#d6c8df",
    "G149": "#e8ddea",
    "G151": "#edd4d7",
    "G155": "#e5d3c7",
    "G157": "#e4dbd1",
    "G162": "#c6c4c0",
    "G167": "#e5d2d0",
    "G168": "#f2e7e6",
    "H016": "#6db6df",
    "H017": "#97c5e6",
    "H018": "#adc8dd",
    "H021": "#a7c1e1",
    "H027": "#c1c6c7",
    "H029": "#cee9f3",
    "H030": "#98d4e5",
    "H031": "#91c6c6",
    "H032": "#e3ecdc",
    "H033": "#bad9d8",
    "H037": "#94cfc8",
    "H038": "#94cfc8",
    "H039": "#a8d6cc",
    "H043": "#aad5c5",
    "H044": "#aad5c5",
    "H048": "#d4d9d5",
    "H050": "#adcbb1",
    "H052": "#bedaaf",
    "H058": "#d9e7bb",
    "H060": "#e3eac3",
    "H071": "#f7f19a",
    "H072": "#f2ec8b",
    "H077": "#f3f1ad",
    "H079": "#f4ed9e",
    "H081": "#f3d69a",
    "H087": "#f1d3b6",
    "H089": "#ecd5a9",
    "H090": "#f1d3b6",
    "H095": "#f8cdaa",
    "H096": "#f7cfb2",
    "H097": "#edd7ab",
    "H098": "#edd7ab",
    "H099": "#e6d9b9",
    "H100": "#b59c73",
    "H101": "#d6b5a5",
    "H109": "#ceb3a2",
    "H113": "#c39679",
    "H115": "#95644d",
    "H120": "#edc8c2",
    "H122": "#c17e68",
    "H129": "#f8ccb4",
    "H130": "#f8ccb4",
    "H134": "#e9ae99",
    "H135": "#f2a8a0",
    "H136": "#f2a8a0",
    "H137": "#de9484",
    "H138": "#d88f8c",
    "H139": "#d88f8c",
    "H140": "#ee9c9c",
    "H141": "#e07286",
    "H143": "#e299b0",
    "H145": "#dca9c2",
    "H148": "#b8a4cc",
    "H149": "#c9b9c6",
    "H151": "#d1afba",
    "H155": "#c9b3a7",
    "H157": "#d0bcb5",
    "H162": "#b7b1ae",
    "H167": "#a29a9b",
    "H168": "#d7c5bf",
    "J016": "#6db6df",
    "J017": "#85b4da",
    "J018": "#6995ba",
    "J021": "#96b2d9",
    "J027": "#a9b2b8",
    "J029": "#add4e5",
    "J030": "#89c1d4",
    "J031": "#549fa4",
    "J032": "#c3e0db",
    "J033": "#88cac6",
    "J037": "#6dc1c2",
    "J038": "#57b6a9",
    "J039": "#81c6b3",
    "J043": "#65ba97",
    "J044": "#75b39c",
    "J048": "#acc0b9",
    "J050": "#a4c2a8",
    "J052": "#a1cd95",
    "J058": "#cbdfa5",
    "J060": "#c8cb94",
    "J071": "#eee689",
    "J072": "#f3eb72",
    "J077": "#f6e47d",
    "J079": "#f6e47d",
    "J081": "#e4ba65",
    "J087": "#e6c599",
    "J089": "#f6ae77",
    "J090": "#f0b487",
    "J095": "#f4a777",
    "J096": "#f39c72",
    "J097": "#c9a46e",
    "J098": "#d9bc8f",
    "J099": "#c9b682",
    "J100": "#9c7b4a",
    "J101": "#8c6b5a",
    "J109": "#8c6c58",
    "J113": "#985c40",
    "J115": "#68351f",
    "J120": "#d7b2aa",
    "J122": "#ad5333",
    "J129": "#ef8e70",
    "J130": "#ec765f",
    "J134": "#e25b54",
    "J135": "#e13e3e",
    "J136": "#ee8684",
    "J137": "#d6393a",
    "J138": "#b25252",
    "J139": "#cc7170",
    "J140": "#d3484e",
    "J141": "#bc374e",
    "J143": "#ca6b8e",
    "J145": "#d298ae",
    "J148": "#b8a4cc",
    "J149": "#c9b9c6",
    "J151": "#b591a3",
    "J155": "#91837c",
    "J157": "#a69794",
    "J162": "#999798",
    "J167": "#72696e",
    "K016": "#57a0cf",
    "K017": "#5483b6",
    "K018": "#6995ba",
    "K021": "#778fc4",
    "K027": "#8595a9",
    "K029": "#7cb3cd",
    "K030": "#158195",
    "K031": "#0f6c74",
    "K032": "#91c6c6",
    "K033": "#37a49e",
    "K037": "#57b6a9",
    "K038": "#48b595",
    "K039": "#42b28c",
    "K043": "#1ea371",
    "K044": "#489680",
    "K048": "#8aaba7",
    "K050": "#8a986d",
    "K052": "#6db664",
    "K058": "#abc07e",
    "K060": "#a5b061",
    "K071": "#e1de6d",
    "K072": "#e7df39",
    "K077": "#f6e12f",
    "K079": "#f4e73f",
    "K081": "#e0b255",
    "K087": "#f1ab6a",
    "K089": "#f4a263",
    "K090": "#dc7c4a",
    "K095": "#f0976a",
    "K096": "#eb7745",
    "K097": "#c4994d",
    "K098": "#b18a4e",
    "K099": "#af934d",
    "K100": "#523a10",
    "K101": "#522919",
    "K109": "#582e1b",
    "K113": "#773617",
    "K115": "#48180f",
    "K120": "#b18985",
    "K122": "#771c17",
    "K129": "#e74d2e",
    "K130": "#e4201b",
    "K134": "#d7091b",
    "K135": "#c7091d",
    "K136": "#e7464a",
    "K137": "#d3071b",
    "K138": "#6a1315",
    "K139": "#b25252",
    "K140": "#c4091d",
    "K141": "#a8102e",
    "K143": "#941139",
    "K145": "#b46491",
    "K148": "#5b4291",
    "K149": "#917c9d",
    "K151": "#916f81",
    "K155": "#4d3f32",
    "K157": "#797573",
    "K162": "#727281",
    "K167": "#584e51",
    "K168": "#584e51",
    "L016": "#0d6aab",
    "L017": "#132c73",
    "L018": "#4e7eaa",
    "L021": "#3463a5",
    "L027": "#394d70",
    "L029": "#177b9a",
    "L030": "#0c5e75",
    "L031": "#0b4546",
    "L032": "#2c7a72",
    "L033": "#086c67",
    "L037": "#2b9187",
    "L038": "#1d9f72",
    "L039": "#1b9668",
    "L043": "#087443",
    "L044": "#136f59",
    "L048": "#37645b",
    "L050": "#3c5b33",
    "L052": "#1fa02e",
    "L058": "#8ea656",
    "L060": "#77781f",
    "L071": "#ccc955",
    "L072": "#f7d416",
    "L077": "#f6c916",
    "L079": "#f5a915",
    "L081": "#d59e10",
    "L087": "#e4670c",
    "L089": "#eb6c14",
    "L090": "#e36c33",
    "L095": "#ee8467",
    "L096": "#e53d1b",
    "L097": "#a06617",
    "L098": "#7d571b",
    "L099": "#7f661b",
    "L100": "#3a1908",
    "L101": "#3a1908",
    "L109": "#070505",
    "L113": "#2b0c0c",
    "L115": "#48180f",
    "L120": "#771c17",
    "L122": "#4d1010",
    "L129": "#d7091b",
    "L130": "#e30f1a",
    "L134": "#c7091d",
    "L135": "#99141b",
    "L136": "#de091a",
    "L137": "#a0131b",
    "L138": "#260b0b",
    "L139": "#96151a",
    "L140": "#96151a",
    "L141": "#571111",
    "L143": "#430e11",
    "L145": "#8b3867",
    "L148": "#100a22",
    "L149": "#4b3155",
    "L151": "#452b38",
    "L155": "#21130c",
    "L157": "#2d2720",
    "L162": "#030507",
    "L167": "#281c24",
    "L168": "#010100",
    "M017": "#0a0b25",
    "M018": "#0c3968",
    "M021": "#0c0a20",
    "M027": "#132745",
    "M029": "#103b4d",
    "M030": "#062139",
    "M031": "#0b292b",
    "M032": "#2c7a72",
    "M033": "#041511",
    "M037": "#09432b",
    "M038": "#05583f",
    "M039": "#046644",
    "M043": "#094b20",
    "M044": "#124838",
    "M048": "#083026",
    "M050": "#0e1f0f",
    "M052": "#0a6e2a",
    "M058": "#7aa04a",
    "M060": "#343d17",
    "M071": "#aaa76e",
    "M072": "#c5b814",
    "M077": "#ceb20f",
    "M079": "#e5ab15",
    "M081": "#bc8710",
    "M087": "#ba5518",
    "M089": "#d56717",
    "M090": "#d85b2d",
    "M095": "#ea6848",
    "M096": "#a3331b",
    "M097": "#4e2911",
    "M098": "#4e2911",
    "M099": "#523a10",
    "M100": "#000000",
    "M101": "#210808",
    "M109": "#070505",
    "M113": "#160808",
    "M115": "#070505",
    "M120": "#1e0a0a",
    "M122": "#4d1010",
    "M129": "#861519",
    "M130": "#a3121b",
    "M134": "#4b1010",
    "M135": "#370f0d",
    "M136": "#99141b",
    "M137": "#450f10",
    "M138": "#100607",
    "M139": "#450f10",
    "M140": "#561111",
    "M141": "#290c0c",
    "M143": "#120707",
    "M145": "#430e11",
    "M148": "#010102",
    "M149": "#010102",
    "M151": "#010102",
    "M155": "#010100",
    "M157": "#010100",
    "M162": "#010100",
    "M167": "#010100",
    "M168": "#010100",
    "MA16": "#162353",
    "N016": "#4385b0",
    "N017": "#214677",
    "N018": "#7993ae",
    "N021": "#394d70",
    "N027": "#5c687e",
    "N029": "#88a1af",
    "N030": "#4f8395",
    "N031": "#8caba8",
    "N032": "#629491",
    "N033": "#177a79",
    "N037": "#70b9bf",
    "N038": "#1ea07f",
    "N039": "#8cccc5",
    "N043": "#609888",
    "N044": "#579488",
    "N048": "#78938e",
    "N050": "#91a487",
    "N052": "#6ea97f",
    "N058": "#a2b27b",
    "N060": "#a7a87f",
    "N071": "#bbb389",
    "N072": "#cfd058",
    "N077": "#eeda41",
    "N079": "#f2ce42",
    "N081": "#cda35a",
    "N087": "#d9af7e",
    "N089": "#eca06f",
    "N090": "#deb095",
    "N095": "#e2907e",
    "N096": "#e49f81",
    "N097": "#b4965f",
    "N098": "#b4965f",
    "N099": "#ad9463",
    "N100": "#6b5221",
    "N101": "#6b4a29",
    "N109": "#6d4829",
    "N113": "#a5735c",
    "N115": "#4b2012",
    "N120": "#582518",
    "N122": "#ae6e5e",
    "N129": "#c87764",
    "N130": "#ca8479",
    "N134": "#bf6465",
    "N135": "#861519",
    "N136": "#ca4e4e",
    "N137": "#ac7173",
    "N138": "#945f61",
    "N139": "#b25252",
    "N140": "#8a232b",
    "N141": "#a36985",
    "N143": "#ad88a7",
    "N145": "#a17494",
    "N148": "#9882b7",
    "N149": "#9b8ba2",
    "N151": "#6f5a6b",
    "N155": "#584b41",
    "N157": "#646163",
    "N162": "#2e2d36",
    "N167": "#010100",
    "N168": "#403438",
    "S016": "#75a7d1",
    "S017": "#7993ae",
    "S018": "#b6c7d1",
    "S021": "#7e95bc",
    "S027": "#a4a8a9",
    "S029": "#dadddf",
    "S030": "#8eaebc",
    "S031": "#bcc8c0",
    "S032": "#dbddd0",
    "S033": "#afc3bc",
    "S037": "#afd8d6",
    "S038": "#3bb49f",
    "S039": "#c1e0db",
    "S043": "#aab8aa",
    "S044": "#82b2ab",
    "S048": "#bac7bd",
    "S050": "#bdbeae",
    "S052": "#a4c2a8",
    "S058": "#ccd8b4",
    "S060": "#c0c0a4",
    "S071": "#c8cb94",
    "S072": "#ddd981",
    "S077": "#f4de7d",
    "S079": "#f7d87c",
    "S081": "#d6b274",
    "S087": "#e6c599",
    "S089": "#f4dabe",
    "S090": "#e4bba3",
    "S095": "#efc1ab",
    "S096": "#efc3b6",
    "S097": "#e2cead",
    "S098": "#dbcaad",
    "S099": "#ceb59c",
    "S100": "#a58c63",
    "S101": "#ad9463",
    "S109": "#a98867",
    "S113": "#c09c8b",
    "S115": "#9b7769",
    "S120": "#b18985",
    "S122": "#c99789",
    "S129": "#e5aaa2",
    "S130": "#e6bdb7",
    "S134": "#d0968b",
    "S135": "#861519",
    "S136": "#e8a19f",
    "S137": "#caa59d",
    "S138": "#d6b3af",
    "S139": "#ce9896",
    "S140": "#ac7173",
    "S141": "#d4a9ba",
    "S143": "#d2b1c7",
    "S145": "#b895ad",
    "S148": "#bcabd0",
    "S149": "#c5b3ba",
    "S151": "#a798a3",
    "S155": "#b7a399",
    "S157": "#b7b1ae",
    "S167": "#887981",
    "S168": "#757175",
    "V016": "#b7cbd0",
    "V017": "#a5b4c8",
    "V018": "#d1d8da",
    "V021": "#91a8c8",
    "V027": "#b9babb",
    "V029": "#dadddf",
    "V030": "#ced0c2",
    "V031": "#dfe1d2",
    "V032": "#f6f8ea",
    "V033": "#e1e3d8",
    "V037": "#dee3dd",
    "V038": "#9dd4d0",
    "V039": "#dfe6de",
    "V043": "#d5e5d8",
    "V044": "#b3ccc5",
    "V048": "#eaece6",
    "V050": "#cad2bf",
    "V052": "#dde2d2",
    "V058": "#e3eac3",
    "V060": "#f0ebd7",
    "V071": "#e3ddbb",
    "V072": "#e7e5a6",
    "V077": "#f5eaa2",
    "V079": "#f0dea0",
    "V081": "#e0c291",
    "V087": "#f4dabe",
    "V089": "#fce3ca",
    "V090": "#efcbb7",
    "V095": "#eed4be",
    "V096": "#f7dfcf",
    "V097": "#f0dcc1",
    "V098": "#f5e2cb",
    "V099": "#e6d6bd",
    "V100": "#ceb59c",
    "V101": "#c5ad94",
    "V109": "#ddbfb1",
    "V113": "#d8b8aa",
    "V115": "#c09c8b",
    "V120": "#d7b2aa",
    "V122": "#d4aba5",
    "V129": "#f9daca",
    "V130": "#f9dbd3",
    "V134": "#e2baad",
    "V135": "#deaeac",
    "V136": "#f4c4c2",
    "V137": "#e8c4bc",
    "V138": "#e8c4bc",
    "V139": "#e8c4bc",
    "V140": "#cda5ac",
    "V141": "#e9c4ce",
    "V145": "#e2c1cd",
    "V148": "#cec5d9",
    "V149": "#d9d1d9",
    "V151": "#c5b3ba",
    "V155": "#c1aba0",
    "V157": "#c5beb7",
    "V162": "#a29a9b",
    "V168": "#b0a5a6",
    "X016": "#a9111c",
    "X017": "#c4091d",
    "X018": "#e30f1a",
    "X021": "#eed4be",
    "X027": "#f8df16",
    "X029": "#eac28f",
    "X030": "#eabf75",
    "X031": "#fee5b5",
    "X032": "#cca791",
    "X033": "#e5c998",
    "X037": "#b09078",
    "X038": "#d4b7ab",
    "X039": "#f5dec8",
    "X043": "#f5d9a6",
    "X044": "#e2c781",
    "X048": "#bc8872",
    "X050": "#d3bc99",
    "X052": "#f3debb",
    "X058": "#fdd77a",
    "X060": "#fdf7ed",
    "X071": "#ecd9c9",
    "X072": "#c0b9af",
    "X077": "#e8e1d3",
    "X079": "#85c0e5",
    "X081": "#dedac3",
    "X087": "#bdbd9c",
    "X089": "#b79792",
    "X090": "#9a9597",
    "X095": "#b09078",
    "X096": "#847a71",
    "X097": "#9a9597",
    "X098": "#d5b898",
    "X099": "#dec58c",
    "X100": "#aeadb1",
    "X101": "#dfdee4",
    "X109": "#74a781",
    "X113": "#fae5d0",
    "X120": "#d7c5bf",
    "X122": "#c8b29a",
    "X129": "#f2d4b2",
    "X130": "#ecd9c9",
    "X134": "#d4b7ab",
    "X135": "#f5dec8",
    "X136": "#ebceaa",
    "X137": "#dadace",
    "X138": "#062139",
    "X139": "#53693a",
    "X140": "#d9c1aa",
    "X141": "#94898d",
    "X143": "#7d8895",
    "X145": "#b6b689",
    "X148": "#929178",
    "X149": "#5d7c73",
    "X151": "#66674f",
    "X155": "#e01f19",
    "X157": "#096ca6",
    "X162": "#f9dbc8",
    "X167": "#98d0c5",
    "X168": "#fcfbf9",
    "Y016": "#260b0b",
    "Y017": "#561111",
    "Y018": "#b90d1d",
    "Y021": "#ec7214",
    "Y027": "#f5a817",
    "Y029": "#e0ae74",
    "Y030": "#ab6b20",
    "Y031": "#e0a055",
    "Y032": "#91141a",
    "Y033": "#7e1c18",
    "Y037": "#050403",
    "Y038": "#581511",
    "Y039": "#8b684a",
    "Y043": "#ebae64",
    "Y044": "#965619",
    "Y048": "#250b0b",
    "Y050": "#ef8617",
    "Y052": "#fed67e",
    "Y058": "#ebb224",
    "Y060": "#fee3b4",
    "Y071": "#a68469",
    "Y072": "#63758a",
    "Y077": "#113288",
    "Y079": "#114f89",
    "Y081": "#515a1e",
    "Y087": "#828771",
    "Y089": "#632118",
    "Y090": "#685953",
    "Y095": "#7e3b24",
    "Y096": "#54523d",
    "Y097": "#889198",
    "Y098": "#704926",
    "Y099": "#d6bdad",
    "Y100": "#343844",
    "Y101": "#7c7d8a",
    "Y109": "#123d19",
    "Y113": "#ecbb64",
    "Y115": "#fed954",
    "Y120": "#a4b7b9",
    "Y122": "#29847a",
    "Y129": "#581511",
    "Y130": "#050403",
    "Y134": "#7c5838",
    "Y135": "#581511",
    "Y136": "#c2925a",
    "Y137": "#4e6a71",
    "Y138": "#020202",
    "Y139": "#0a180c",
    "Y140": "#a97349",
    "Y141": "#19180c",
    "Y143": "#234b95",
    "Y145": "#483f19",
    "Y148": "#263827",
    "Y149": "#000000",
    "Y151": "#000000",
    "Y155": "#571111",
    "Y157": "#11183a",
    "Y162": "#cd6d42",
    "Y167": "#062623",
    "Y168": "#0b0e2a",
  };
  // aplicar colores a cada caja
  document.querySelectorAll('.box_color').forEach(box => {
    const code = box.dataset.codigo;
    if (code && colorMap[code]) {
      box.style.background = colorMap[code];
      // contraste simple: blanco o negro según luminosidad
      function luminance(r,g,b){ // relative luminance
        const a = [r,g,b].map(v => {
          v /= 255;
          return v <= 0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055, 2.4);
        });
        return 0.2126*a[0] + 0.7152*a[1] + 0.0722*a[2];
      }
      function hexToRgb(hex){
        hex = hex.replace('#','');
        if (hex.length === 3) {
          hex = hex.split('').map(c=>c+c).join('');
        }
        const bigint = parseInt(hex,16);
        return [(bigint>>16)&255, (bigint>>8)&255, bigint&255];
      }
      const rgb = hexToRgb(colorMap[code]);
      const lum = luminance(rgb[0], rgb[1], rgb[2]);
      // contraste: si fondo es oscuro, texto blanco; si claro, texto negro
      box.style.color = lum > 0.5 ? '#000' : '#fff';
      // etiqueta con código
      const label = document.createElement('div');
      label.className = 'code-label';
      label.textContent = code;
      label.style.position='absolute';
      label.style.bottom='4px';
      label.style.left='4px';
      label.style.fontSize='10px';
      box.style.position='relative';
      box.appendChild(label);
    }
  });

  // aplicar colores a tabs
  const tabColorMap = {
    "#tab-rojos":"#d27e6c",
    "#tab-naranjas":"#ff8c42",
    "#tab-amarillos":"#ffdd57",
    "#tab-violetas":"#9b59b6",
    "#tab-verdes":"#2ecc71",
    "#tab-azules":"#3498db",
    "#tab-marrones":"#8e5c42",
    "#tab-grises":"#7f8c8d"
  };
  document.querySelectorAll('.tab-button').forEach(btn => {
    const href = btn.getAttribute('href');
    if (href && tabColorMap[href]) {
      btn.style.background = tabColorMap[href];
      btn.style.color = '#fff';
    }
  });

  // pestañas: activación por hash
  function activateHashTab() {
    const hash = window.location.hash || '#tab-rojos';
    document.querySelectorAll('.paleta').forEach(p=>p.style.display='none');
    const target = document.querySelector(hash);
    if (target) target.style.display='grid';
    document.querySelectorAll('.tab-button').forEach(b=>b.classList.remove('active'));
    const activeBtn = document.querySelector('.tab-button[href="'+hash+'"]');
    if (activeBtn) activeBtn.classList.add('active');
  }
  document.querySelectorAll('.tab-button').forEach(b=>{
    b.addEventListener('click', e=>{
      e.preventDefault();
      const href = b.getAttribute('href');
      if (!href) return;
      history.replaceState(null,'',href);
      activateHashTab();
    });
  });
  window.addEventListener('hashchange', activateHashTab);
  activateHashTab();
});
